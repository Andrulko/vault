{% extends 'v2/management_layout.html.twig' %}
{% block metaTitle %}{{ 'choose_beneficiary'|trans }}{% endblock %}
{% block subTitle %}{{ 'choose_beneficiary_centers'|trans|upper }}{% endblock %}
{% block subTitleIconName %}user-plus{% endblock %}

{% set hasSecretQuestion = beneficiary.questionSecrete %}
{% set hasTelephone = beneficiary.user.telephone %}

{% block content %}
    <div>
        <h4 class="text-center mt-4">
            <i class="fas fa-user me-1"></i>
            {{ beneficiary.user.username }}
        </h4>
        <div class="row my-4">
            <div class="col-12 col-md-5 mb-4">
                <h4 class="text-center">{{ 'relays'|trans }} :</h4>
                {{ include('v2/user_creation/components/_relays_checkboxes.html.twig', {user: beneficiary.user}) }}
            </div>
            <div class="d-flex flex-column mx-auto mt-5 col-12 col-md-6 font-size-1-2">
                <span>{{ 'beneficiary_relay_affiliation_intro'|trans }} </span>
                {% if hasSecretQuestion or hasTelephone %}
                    <span>{{ 'beneficiary_relay_affiliation_options'|trans }} </span>
                    <ul class="mx-auto pt-2">
                        {% if hasSecretQuestion %}<li>{{ 'beneficiary_relay_affiliation_question'|trans }}</li>{% endif %}
                        {% if hasTelephone %}<li>{{ 'beneficiary_relay_affiliation_sms'|trans }}</li>{% endif %}
                    </ul>
                    <span>{{ 'beneficiary_relay_affiliation_end'|trans }} </span>
                {% endif %}
                <br>
                {% block frame %}
                    <turbo-frame id="force-affiliation-form" class="text-center">
                        {% if hasSecretQuestion %}
                            <a class="btn btn-blue text-white shadow-sm"
                               href="{{ path('affiliate_beneficiary_relays_secret_question', { id:beneficiary.id }) }}"
                            >
                                {{ 'answer_secret_question'|trans }}
                            </a>
                        {% endif %}
                        {% if hasTelephone %}
                            <a class="btn btn-blue text-white shadow-sm"
                               href="{{ path('affiliate_beneficiary_relays_sms_code', { id:beneficiary.id }) }}"
                            >
                                {{ 'send_sms_code'|trans }}
                            </a>
                        {% endif %}
                    </turbo-frame>
                {% endblock %}
            </div>
            <div class="d-flex justify-content-between mt-4 pt-2">
                <div class="font-size-1-2">
                    <span>{{ 'add_si_siao_number_intro'|trans }}</span>
                    <a class="btn btn-blue text-white shadow-sm"
                       href="{{ path('affiliate_beneficiary_add_si_siao_number', { id:beneficiary.id }) }}"
                    >
                        {{ 'add'|trans }}
                    </a>
                </div>
                {{ include('v2/common/_button_row.html.twig', {href: path('list_beneficiaries'), text: 'finish'|trans }) }}
            </div>
        </div>
    </div>
{% endblock %}
